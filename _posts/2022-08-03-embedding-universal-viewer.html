---
layout: post
title: "Universal Viewer issues - embedding and persisent urls"
date: 2022-08-03
---
<p>UV features no longer functioning in <a href="https://librarysearch.cardiff.ac.uk/discovery/collectionDiscovery?vid=44WHELF_CAR:44WHELF_CAR_VU1">Alma Digital</a>, as of early June 2022:</p>
<ol><li>Cannot copy embed code from the viewer to create an iframe in an external resource</li>
<li>Zoom/position coordinates (xywh values) missing from url (viewing position cannot be captured by share link)</li>
<li>Cannot load manifest to most IIIF viewers when pasting to prefixes</li></ol> </p>
<h3>Direct links to test object</h3></p>
<ul>
    <li><a href="https://librarysearch.cardiff.ac.uk/view/UniversalViewer/44WHELF_CAR/12206137520002420?iiifVersion=2&updateStatistics=false">Object url</a></li>
    <li><a href="https://librarysearch.cardiff.ac.uk/view/iiif/presentation/44WHELF_CAR/12206137520002420/manifest?updateStatistics=false?manifest=https://librarysearch.cardiff.ac.uk/view/iiif/presentation/44WHELF_CAR/12206137520002420/manifest?updateStatistics=false">Manifest</a></li>
    <li><a href="https://iiif-preview.stephen.wf/p3/bac2add2dc71464685744c29c526a1e6/1659949123364">Direct link to json</a></li>
    </li></p>
    </ul>
<!--more-->
<h3><p>1. Cannot copy embed code from <a href="https://librarysearch.cardiff.ac.uk/view/UniversalViewer/44WHELF_CAR/12206137520002420?iiifVersion=2&updateStatistics=false">the viewer</a> to create an iframe in an external resource. Examples below:</p></h3>
<p>
Embedding at 640x480 - content won't load
<iframe src="https://librarysearch.cardiff.ac.uk/view/UniversalViewer/44WHELF_CAR/12206137520002420?iiifVersion=2&updateStatistics=false&c=0&m=0&s=0&cv=0&config=&locales=en-GB:English (GB),cy-GB:Cymraeg,fr-FR:Français (FR),pl-PL:Polski,sv-SE:Svenska,xx-XX:English (GB) (xx-XX)&xywh=-4174,-277,11956,6093&r=0" width="640" height="480" allowfullscreen frameborder="0"></iframe>
</p>
<p>
Embedding at 800x600 - content loads but won't render correctly. The content will only show after clicking << at the top left to restore the metadata panel, clicking >> to restore the contents panel, then clicking on a thumbnail to load the image.
<iframe src="https://librarysearch.cardiff.ac.uk/view/UniversalViewer/44WHELF_CAR/12206137520002420?iiifVersion=2&updateStatistics=false&c=0&m=0&s=0&cv=0&config=&locales=en-GB:English (GB),cy-GB:Cymraeg,fr-FR:Français (FR),pl-PL:Polski,sv-SE:Svenska,xx-XX:English (GB) (xx-XX)&xywh=-4174,-277,11956,6093&r=0" width="800" height="600" allowfullscreen frameborder="0"></iframe>
</p>
<p>However, scrolling the page zoom in and out causes the images to load.</p>
<p>Example at 800x600 from National History Museum (also Alma Digital):</p>
<iframe src="https://nhm.primo.exlibrisgroup.com/view/UniversalViewer/44NHM_INST/12190875980002081?updateStatistics=false&c=0&m=0&s=0&cv=0&config=&locales=en-GB:English (GB),cy-GB:Cymraeg,fr-FR:Français (FR),pl-PL:Polski,sv-SE:Svenska,xx-XX:English (GB) (xx-XX)&xywh=-1431,414,5357,2539&r=0" width="800" height="600" allowfullscreen frameborder="0"></iframe>
<p>Example from National Library of Wales (using UV but not Alma Digital)</p>
<iframe src="https://viewer.library.wales/build/uv.html#?manifest=https://damsssl.llgc.org.uk/iiif/2.0/4717412/manifest.json&c=0&m=0&s=0&cv=11&config=config/standalone.json&locales=en-GB:English,cy-GB:Cymraeg,fr-FR:Français (FR),sv-SE:Svenska,xx-XX:English (GB) (xx-XX)&xywh=1555,778,1676,1270&r=0" width="800" height="600" allowfullscreen frameborder="0"></iframe>
<h3><p>2. Zoom/position coordinates (xywh values) missing from url (viewing position cannot be captured by share link). Option to download 'current view' still works.</p></h3>
<p>In this example from the <a href="https://viewer.library.wales/4717412#?c=&m=&s=&cv=11&manifest=https%3A%2F%2Fdamsssl.llgc.org.uk%2Fiiif%2F2.0%2F4717412%2Fmanifest.json&xywh=1819%2C978%2C1150%2C871">National Library of Wales</a>, xywh values in the url allow the capture of particular section and zoom level of an image, in order to re-use it elsewhere. Now, the url is static when scrolling in and out of <a href="https://librarysearch.cardiff.ac.uk/view/UniversalViewer/44WHELF_CAR/12206137520002420?iiifVersion=2&updateStatistics=false">the viewer.</a></p>
<p>Being able to capture a section of an image using its url is something I demonstrated during a presentation earlier this year (at 17 minutes in)</p> <iframe width="560" height="315" src="https://www.youtube.com/embed/ywI3tkFO-ts" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>I recorded this demo on June 2nd, but when I gave the same demo at an in-person event on 7th, the share link no longer saved the positioning - so something has been changed around that time.</p>
<p>
<h3><p>3. Cannot load manifest to most IIIF viewers when pasting to prefixes</p></h3>
<p>It used to be possible to paste the manifest onto a viewer prefix to load it in an alternative viewer. The following prefixes no longer recognise the manifest as valid:</p>
<ul><li>https://universalviewer.io/uv.html?manifest=</li>
    <li>https://demo.tify.rocks/demo.html?manifest=</li>
    <li>http://codh.rois.ac.jp/software/iiif-curation-viewer/demo/?manifest=</li>
    <li>http://www.getty.edu/art/collection/static/viewers/mirador/?manifest=</li></ul>
<p>Loading to https://uv-v4.netlify.app/#?manifest= works, and has a responsive url. But copied embed code from here also fails to render properly in an external resource:</p>
<p>
<iframe src="https://uv-v4.netlify.app/uv.html#?manifest=https://librarysearch.cardiff.ac.uk/view/iiif/presentation/44WHELF_CAR/12206137520002420/manifest?updateStatistics=false&c=0&m=0&cv=1&config=&locales=en-GB:English (GB),cy-GB:Cymraeg,fr-FR:Français (FR),pl-PL:Polski,sv-SE:Svenska&xywh=672,680,1978,1307&r=0" width="800" height="600" allowfullscreen frameborder="0"></iframe></p>
